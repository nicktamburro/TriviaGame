<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script type ="text/javascript" src ="assets/javascript/app.js"></script>
 <script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>

	
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">

	<title>Trivia!</title>
</head>
<body>

<div class="jumbotron text-center">
  <h1 class="title">Trivia Game!</h1>
  <h1 id="timer"></h1>
  <h1 class="question"></h1>
  <h2 class="right"></h2>
  <h2 class="wrong"></h2>
  <h2 class="unanswered"></h2>

  <button type="button" class="btn btn-success answer1 answerbutton"></button><br><br>
  <button type="button" class="btn btn-primary answer2 answerbutton"></button><br><br>
  <button type="button" class="btn btn-info answer3 answerbutton"></button><br><br>
  <button type="button" class="btn btn-danger answer4 answerbutton"></button><br><br>
  <p><a class="btn btn-primary btn-lg button" href="#" role="button">Play!</a></p>
</div>


<script type="text/javascript">

var right = 0;
var wrong = 0;
var unanswered = 0;
var userChoices = [];
var userGuess = 0;

var timer; 
var counter = 10;
var intervalId;
var i = 0;
var j = 0;


var questions = [{

	question: "What are we doing here?",
	answers: ["This!", "That!","Another thing!","The first thing!"],
	rightAnswer: "This!",
},  {
	question: "What's it about?",
	answers: ["Them!","Us!","Nobody!","Everybody!"],
rightAnswer: "Us!",
},   {
	question: "Who is it?",
	answers: ["Him!","Her!","They!","Them!"],
	rightAnswer: "They!",
}];

var answerScreens = ["The answer is This!", "The answer is Us!", "The answer is They!"];




$(".answerbutton").hide(); 

	
$(".button").click(function(){ 
	nextQuestion();
	$(".answerbutton").show();
	$(".button").hide();
		

});

function runTimer(){
	intervalId = setInterval(decrement, 1000);
}

function resetTimer(){
	counter = 10;
}

function decrement(){
	counter--;
	$("#timer").html("<h2>" + counter + "</h2>");

	if (counter === 0) {
		stopTimer();
		resetTimer();
		answerScreen();
		unanswered++;
	}
}

function stopTimer(){
	clearInterval(intervalId);
}

function nextQuestion(){
		$("#timer").show();
		resetTimer();
		runTimer();
	//setTimeout(function(){
		/*runTimer();
        if (counter === 0){
        	answerScreen();
        	unanswered++;
        }*/
	$(".answerbutton").show();


	 $(".question").html(questions[i].question);

		$(".answer1").html(questions[i].answers[0])
		$(".answer2").html(questions[i].answers[1])
		$(".answer3").html(questions[i].answers[2])
		$(".answer4").html(questions[i].answers[3])

}

 

function answerScreen(){
	$(".answer1").hide(); 
	$(".answer2").hide();
	$(".answer3").hide();
	$(".answer4").hide();
	$(".question").html(answerScreens[j]);
	$("#timer").hide();


if (i < answerScreens.length) {
	stopTimer();
	setTimeout(function(){
          nextQuestion();
          j++;
        }, 5000);

//NEXT: little glitch here, it's not showing the answer screen for the last one, since it's not
//< questions.length anymore... 
} else {
	setTimeout(function(){
	endScreen();
}, 5000);

}
}

function endScreen(){

	//NEXT NEXT: need to clear the timeout, and STOP THE QUESTIONS!
	clearInterval(intervalId);
	$(".question").hide();
	$(".answer1").hide(); 
	$(".answer2").hide();
	$(".answer3").hide();
	$(".answer4").hide();
	$(".right").html("You got " + right + " answers right!");
	$(".wrong").html("You got " + wrong + " answers wrong!");
	$(".unanswered").html("You didn't answer " + unanswered + " questions!");

}

	$(".answer1").on("click", function(){
		userChoices.push(questions[i].answers[0]);
		if (questions[i].answers[0] === questions[i].rightAnswer){
			alert("yes!");
			right++;
			i++;
			stopTimer();
			answerScreen();
		} else {
			alert("no!");
			wrong++;
			i++;
			stopTimer();
			answerScreen();
		}
	});
	$(".answer2").on("click", function(){
		userChoices.push(questions[i].answers[1]);
		if (questions[i].answers[1] === questions[i].rightAnswer){
			alert("yes!");
			right++;
			i++;
			stopTimer();
			answerScreen();
		
		} else {
			alert("no!");
			wrong++;
			i++;
			stopTimer();
			answerScreen();
	
		}
	});
	$(".answer3").on("click", function(){
		userChoices.push(questions[i].answers[2]);
		if (questions[i].answers[2] === questions[i].rightAnswer){
			alert("yes!");
			right++;
			i++;	
			stopTimer();
			answerScreen();	

		} else {
			alert("no!");
			wrong++;
			i++;
			stopTimer();
			answerScreen();
		
		}

	});
	$(".answer4").on("click", function(){
		userChoices.push(questions[i].answers[3]);
		if (questions[i].answers[3] === questions[i].rightAnswer){
			alert("yes!");
			right++;
			i++;
			stopTimer();
			answerScreen();
			
		} else {
			alert("no!");
			wrong++;
			i++;
			stopTimer();
			answerScreen();
			
		}

	});

</script>

</body>
</html>